<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Versátil Sistemas – Loja</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#f5f4f0;
  --card:#f6efe6;
  --text:#2e2b25;
  --muted:#6b6257;
  --brand:#b29463;
  --brand-strong:#9a7a45;
  --border:#e7dfd4;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif
}

/* ===== Header ===== */
.header{
  height:64px;background:#111;display:flex;align-items:center;justify-content:space-between;padding:0 24px;color:#fff;position:sticky;top:0;z-index:20
}
.header-left{display:flex;align-items:center;gap:12px}
.logo-img{
  height:42px;width:auto;object-fit:contain;display:block;border-radius:8px;
}
.header-right{display:flex;align-items:center;gap:16px}
.header-link{color:#fff;text-decoration:none;font-weight:600;opacity:.9}
.header-link:hover{opacity:1}

/* ===== Cart Button ===== */
.cart-btn{position:relative;border:0;background:transparent;color:#fff;cursor:pointer;padding:6px;display:grid;place-items:center}
.cart-btn svg{width:26px;height:26px}
.badge{
  position:absolute;top:-4px;right:-4px;background:#ffae00;color:#111;border-radius:999px;font-size:12px;line-height:1;padding:3px 6px;font-weight:700;min-width:20px;text-align:center
}

/* ===== Content ===== */
.main{padding:32px 24px}
.container{
  max-width:1240px;margin:0 auto;background:#fff;border:1px solid var(--border);border-radius:16px;padding:28px
}
.title{font-size:40px;margin:8px 0 24px;text-align:center;color:var(--brand-strong);font-weight:800}
.grid{
  display:grid;grid-template-columns:repeat(4,1fr);gap:24px
}
.card{
  background:var(--card);border:1px solid var(--border);border-radius:14px;padding:20px;display:flex;flex-direction:column;gap:12px;min-height:180px
}
.card h3{margin:0;font-size:20px}
.card p{margin:0;color:var(--muted)}
.price{color:var(--brand-strong);font-weight:800;font-size:18px}
.stock{color:var(--muted);font-size:14px}
.card .actions{margin-top:auto;display:flex;gap:12px;align-items:center}
.qty{
  display:flex;align-items:center;border:1px solid var(--border);border-radius:10px;overflow:hidden
}
.qty button{
  border:0;background:#fff;padding:6px 10px;cursor:pointer;font-size:16px
}
.qty input{
  width:40px;text-align:center;border:0;background:#fff;padding:6px 0;font-weight:600
}
.add{
  margin-left:auto;background:var(--brand);color:#fff;border:0;border-radius:10px;padding:10px 14px;cursor:pointer;font-weight:700;transition:.15s
}
.add:hover{background:var(--brand-strong)}
@media (max-width:1100px){.grid{grid-template-columns:repeat(3,1fr)}}
@media (max-width:820px){.grid{grid-template-columns:repeat(2,1fr)}.title{font-size:32px}}
@media (max-width:560px){.grid{grid-template-columns:1fr}}

/* ===== Cart Drawer ===== */
.cart-drawer{
  position:fixed;inset:0 0 0 auto;width:420px;max-width:100%;background:#fff;border-left:1px solid var(--border);transform:translateX(100%);transition:transform .25s ease;z-index:50;display:flex;flex-direction:column
}
.cart-drawer.open{transform:translateX(0)}
.cart-head{
  display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid var(--border);background:#faf8f4
}
.cart-head h4{margin:0;font-size:18px}
.close{border:0;background:transparent;font-size:28px;cursor:pointer;line-height:1;color:#444}
.cart-list{flex:1;overflow:auto;padding:8px 12px}
.item{
  display:grid;grid-template-columns:56px 1fr auto;gap:12px;align-items:center;border-bottom:1px dashed var(--border);padding:12px 4px
}
.thumb{
  width:56px;height:56px;border-radius:10px;background:var(--card);border:1px solid var(--border);display:grid;place-items:center;font-weight:700;color:var(--brand-strong)
}
.info{display:flex;flex-direction:column;gap:4px}
.info .name{font-weight:700}
.info .unit{font-size:13px;color:var(--muted)}
.row{
  display:flex;align-items:center;gap:8px;justify-content:flex-end
}
.row .qty-mini{
  display:flex;align-items:center;border:1px solid var(--border);border-radius:8px;overflow:hidden
}
.row .qty-mini button{border:0;background:#fff;padding:4px 8px;cursor:pointer}
.row .qty-mini input{width:32px;text-align:center;border:0}
.remove{
  border:0;background:transparent;color:#b3261e;font-weight:700;cursor:pointer
}
.cart-foot{
  border-top:1px solid var(--border);padding:12px 16px;background:#fff;display:flex;flex-direction:column;gap:10px
}
.total{
  display:flex;align-items:center;justify-content:space-between;font-size:18px;font-weight:800
}
.actions-foot{display:grid;gap:8px}
.btn{
  padding:12px;border-radius:10px;border:1px solid var(--border);cursor:pointer;font-weight:700
}
.primary{background:var(--brand);color:#fff;border-color:var(--brand)}
.primary:hover{background:var(--brand-strong)}
.secondary{background:#fff}
.danger{background:#b3261e;color:#fff;border-color:#b3261e}

/* ===== Overlay ===== */
.overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.28);opacity:0;pointer-events:none;transition:.25s;z-index:40
}
.overlay.open{opacity:1;pointer-events:auto}

/* Auxiliar */
.muted-bar{height:18px}
</style>
</head>
<body>

<header class="header">
  <div class="header-left">
    <!-- Somente o logo -->
    <img src="imagens/logoversatil.png" alt="Logo Versátil" class="logo-img">
  </div>
  <div class="header-right">
    <button id="openCart" class="cart-btn" aria-label="Abrir carrinho">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2Zm10 0c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2ZM7.16 14h9.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.86-1.48H6.21L5.27 2H2v2h2l3.6 7.59-1.35 2.45C5.52 14.37 6 15 6.7 15H20v-2H7.42l.74-1.36Z"/></svg>
      <span id="cartCount" class="badge">0</span>
    </button>
    <a class="header-link" href="#">Meus Pedidos</a>
  </div>
</header>

<main class="main">
  <div class="container">
    <h1 class="title">Lista de Produtos</h1>
    <div id="grid" class="grid"></div>
  </div>
</main>

<div id="overlay" class="overlay"></div>

<aside id="drawer" class="cart-drawer" aria-hidden="true">
  <div class="cart-head">
    <h4>Seu carrinho</h4>
    <button id="closeCart" class="close" aria-label="Fechar">×</button>
  </div>
  <div id="cartList" class="cart-list"></div>
  <div class="cart-foot">
    <div class="total"><span>Total</span><span id="cartTotal">R$ 0,00</span></div>
    <div class="actions-foot">
      <button id="finalize" class="btn primary">Finalizar compra</button>
      <button id="continue" class="btn secondary">Continuar comprando</button>
      <button id="cancel" class="btn danger">Cancelar compra</button>
    </div>
  </div>
</aside>

<script>
const produtos = [
  {id:'p1',nome:'Nome do produto',desc:'Descrição do produto',preco:32.90,estoque:10},
  {id:'p2',nome:'Nome do produto',desc:'Descrição do produto',preco:32.90,estoque:8},
  {id:'p3',nome:'Nome do produto',desc:'Descrição do produto',preco:32.90,estoque:4},
  {id:'p4',nome:'Nome do produto',desc:'Descrição do produto',preco:32.90,estoque:6},
  {id:'p5',nome:'Nome do produto',desc:'Descrição do produto',preco:32.90,estoque:9}
];
const grid = document.getElementById('grid');
const drawer = document.getElementById('drawer');
const overlay = document.getElementById('overlay');
const cartList = document.getElementById('cartList');
const cartTotal = document.getElementById('cartTotal');
const cartCount = document.getElementById('cartCount');
const openCartBtn = document.getElementById('openCart');
const closeCartBtn = document.getElementById('closeCart');
const continueBtn = document.getElementById('continue');
const cancelBtn = document.getElementById('cancel');
const finalizeBtn = document.getElementById('finalize');

function money(n){return n.toLocaleString('pt-BR',{style:'currency',currency:'BRL'})}
function loadCart(){try{return JSON.parse(localStorage.getItem('cart')||'{}')}catch{return {}}}
function saveCart(c){localStorage.setItem('cart',JSON.stringify(c))}
function cartArray(c){return Object.entries(c).map(([id,q])=>({id,qty:q,prod:produtos.find(p=>p.id===id)})).filter(x=>x.prod)}
function cartTotals(c){const a=cartArray(c);const t=a.reduce((s,x)=>s+x.prod.preco*x.qty,0);const q=a.reduce((s,x)=>s+x.qty,0);return {t,q}}
function setOpen(v){drawer.classList.toggle('open',v);overlay.classList.toggle('open',v);drawer.setAttribute('aria-hidden',v?'false':'true')}
function inc(id){const c=loadCart();c[id]=(c[id]||0)+1;saveCart(c);render()}
function dec(id){const c=loadCart();if(!c[id])return;c[id]-=1;if(c[id]<=0)delete c[id];saveCart(c);render()}
function removeItem(id){const c=loadCart();delete c[id];saveCart(c);render()}
function clearCart(){saveCart({});render()}
function addToCart(id,qty){const c=loadCart();c[id]=(c[id]||0)+qty;saveCart(c);render();setOpen(true)}

function renderGrid(){
  grid.innerHTML='';
  produtos.forEach(p=>{
    const card=document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <h3>${p.nome}</h3>
      <p>${p.desc}</p>
      <div class="price">${money(p.preco)}</div>
      <div class="stock">Estoque: ${p.estoque} unidades</div>
      <div class="actions">
        <div class="qty">
          <button type="button" data-minus>−</button>
          <input type="text" value="1" inputmode="numeric" pattern="[0-9]*" data-qty>
          <button type="button" data-plus>+</button>
        </div>
        <button class="add" data-add>Adicionar</button>
      </div>
    `;
    const input=card.querySelector('[data-qty]');
    const minus=card.querySelector('[data-minus]');
    const plus=card.querySelector('[data-plus]');
    const add=card.querySelector('[data-add]');
    minus.onclick=()=>{const v=Math.max(1,parseInt(input.value||'1')-1);input.value=v}
    plus.onclick=()=>{const v=Math.min(p.estoque,parseInt(input.value||'1')+1);input.value=v}
    input.oninput=()=>{input.value=input.value.replace(/\D/g,'')||'1'}
    add.onclick=()=>addToCart(p.id,parseInt(input.value||'1'))
    grid.appendChild(card);
  });
}

function renderCart(){
  const c=loadCart();
  const arr=cartArray(c);
  if(arr.length===0){
    cartList.innerHTML=`<div class="muted-bar"></div><p style="padding:0 12px;color:var(--muted)">Seu carrinho está vazio.</p>`;
  }else{
    cartList.innerHTML='';
    arr.forEach(x=>{
      const li=document.createElement('div');
      li.className='item';
      li.innerHTML=`
        <div class="thumb">${x.prod.nome[0]||'P'}</div>
        <div class="info">
          <div class="name">${x.prod.nome}</div>
          <div class="unit">${money(x.prod.preco)} • ${x.prod.desc}</div>
        </div>
        <div class="row">
          <div class="qty-mini">
            <button data-dec>−</button>
            <input value="${x.qty}" readonly>
            <button data-inc>+</button>
          </div>
          <button class="remove" data-remove>Remover</button>
        </div>
      `;
      li.querySelector('[data-inc]').onclick=()=>inc(x.id);
      li.querySelector('[data-dec]').onclick=()=>dec(x.id);
      li.querySelector('[data-remove]').onclick=()=>removeItem(x.id);
      cartList.appendChild(li);
    });
  }
  const totals=cartTotals(c);
  cartTotal.textContent=money(totals.t);
  cartCount.textContent=totals.q;
}

function render(){renderCart()}

openCartBtn.onclick=()=>setOpen(true);
closeCartBtn.onclick=()=>setOpen(false);
overlay.onclick=()=>setOpen(false);
continueBtn.onclick=()=>setOpen(false);
cancelBtn.onclick=()=>{if(confirm('Cancelar e limpar o carrinho?')){clearCart();setOpen(false)}}
finalizeBtn.onclick=()=>{const c=loadCart();if(Object.keys(c).length===0){alert('Adicione itens ao carrinho.');return}alert('Pedido recebido! (exemplo)');clearCart();setOpen(false)}

renderGrid();
render();
</script>
</body>
</html>
